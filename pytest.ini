[tool:pytest]
# Test discovery and execution
testpaths = tests Pinak_Services/memory_service/tests Pinak_Services/pinak_gov_gateway/tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*
addopts =
    --verbose
    --tb=short
    --strict-markers
    --disable-warnings
    --cov=pinak
    --cov=Pinak_Services
    --cov-report=term-missing
    --cov-report=html:htmlcov
    --cov-report=xml:coverage.xml
    --cov-fail-under=80
    --asyncio-mode=auto
    --durations=10
    --durations-min=1.0
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests
    smoke: marks tests as smoke tests
    tdd: marks tests written in TDD style
    world_beating: marks tests for world-beating retrieval features
    governance: marks tests for governance features
    security: marks tests for security features
    memory: marks tests for memory service
    context: marks tests for context broker
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning
    error::Exception
    error::RuntimeError

# Test reporting
junit_family = xunit2
junit_logging = all

# Parallel execution (optional)
# addopts = --numprocesses=auto

# Environment variables for testing
env =
    PYTHONPATH=src
    USE_MOCK_EMBEDDINGS=true
    PINAK_TESTING=true
    SECRET_KEY=test-secret-key-change-in-prod

